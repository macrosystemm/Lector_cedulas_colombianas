<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lector PDF417 Cédula</title>
  <!-- Incluye la librería pdf417-decoder-js desde un CDN -->
  <script src="https://cdn.jsdelivr.net/npm/pdf417-decoder-js/dist/pdf417-decoder.min.js"></script>
</head>
<body>
  <h1>Escanear Cédula Colombiana (PDF417) 2025</h1>

  <!-- Subir imagen de la cédula -->
  <input type="file" id="fileInput" accept="image/*">
  <p id="resultado">Esperando imagen...</p>

  <script>
    const resultado = document.getElementById('resultado');

    document.getElementById('fileInput').addEventListener('change', async (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const imgURL = URL.createObjectURL(file);
      const img = new Image();
      img.src = imgURL;

      img.onload = () => {
        try {
          // Decodificar el PDF417
          const decoded = PDF417.decode(img);
          if (decoded && decoded.length > 0) {
            resultado.textContent = "Datos decodificados: " + decoded[0].text;
          } else {
            resultado.textContent = "No se pudo leer el código PDF417.";
          }
        } catch (err) {
          resultado.textContent = "Error al decodificar.";
          console.error(err);
        }
      };
    });
  </script>
</body>
</html>

